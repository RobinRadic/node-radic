---
layout: page
title: Node Radic
minify_content: false
navigation:
  - name: Home
    link: /
    icon: fa fa-home
  - name: Overview
    link: /node-radic
    icon: fa fa-dashboard
  - name: Coverage
    link: /node-radic/coverage
    icon: fa fa-code
  - name: Modules
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: radic
        link: /node-radic/module-radic.html
  - name: Classes
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: Config
        link: /node-radic/Config.html
      - name: DB
        link: /node-radic/DB.html
      - name: Model
        link: /node-radic/Model.html
      - name: Table
        link: /node-radic/Table.html
  - name: Namespaces
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: cli
        link: /node-radic/cli.html
      - name: git
        link: /node-radic/git.html
      - name: net
        link: /node-radic/net.html
      - name: sh
        link: /node-radic/sh.html
      - name: util
        link: /node-radic/util.html
      - name: vboxmanage
        link: /node-radic/vboxmanage.html

---

<link type="text/css" rel="stylesheet" href="styles/jsdoc-radic.css">


<ul class="nav nav-tabs hide">
    <li><a href="index.html">Overview</a></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Modules<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="module-radic.html">radic</a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Classes<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="Config.html">Config</a></li><li><a href="DB.html">DB</a></li><li><a href="Model.html">Model</a></li><li><a href="Table.html">Table</a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Namespaces<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="cli.html">cli</a></li><li><a href="git.html">git</a></li><li><a href="net.html">net</a></li><li><a href="sh.html">sh</a></li><li><a href="util.html">util</a></li><li><a href="vboxmanage.html">vboxmanage</a></li></ul></li>
</ul>

<div id="main">
    



    
            {% highlight javascript %}
            var execsync = require('execSync'),
    _ = require('lodash'),

    path = require('path'),
    exec = require('child_process').exec,
    spawn = require('child_process').spawn,
    util = require('./util');
/**
 * @namespace sh
 */
var sh = module.exports;

/**
 * Execute a command
 *
 * @param command
 * @param args
 * @param ops
 * @param callback
 * @returns {*}
 */
sh.exec = function (command, args, ops, callback) {

    if (typeof args == 'function') {
        callback = args;
        args = [];
        ops = {};
    } else if (!(args instanceof Array)) {
        callback = ops;
        ops = args;
        args = [];
    }


    if (typeof ops == 'function') {
        callback = ops;
        ops = {};
    }

    //no callbacks? THEY MUST EXIST!!!!
    if (!callback) callback = ops.callback || ops;

    var callbacks = {};

    if (typeof callback != 'function') {
        callbacks = callback;
    }

    if (!callbacks.error) callbacks.error = function () {
    };
    if (!callbacks.exit) callbacks.exit = function () {
    };
    if (!callbacks.data) callbacks.data = function () {
    };


    var procOps = {
        cwd: ops.cwd,
        env: ops.env,
        customFds: ops.customFds
    };


    var proc = spawn(command, ops.args || args, procOps), errors = [], buffer = [];

    proc.stdout.on('data', function (data) {
        buffer.push(data);

        callbacks.data(data);
    });

    proc.stderr.on('data', function (data) {
        errors.push(data);

        callbacks.error(data);
    });

    proc.on('exit', function (code) {

        if (typeof callback == 'function') {
            callback(errors.length ? errors.join(' ') : false, buffer.length ? buffer.join(' ') : false);
        } else if (callbacks.exit) {
            callbacks.exit(code);
        }
    });

    return proc;

};

/**
 * Execute a command on the command line, synchronously
 * @returns {object} - Result of the execution.
 * @example
 * var result = radic.sh.execSync('echo $USER; echo some_err 1>&amp;2; exit 1');
 * console.log('return code ' + result.code);
 * console.log('stdout + stderr ' + result.stdout);
 */
sh.execSync = function () {
    return execsync.exec.apply(sh, _.toArray(arguments))
};

sh.execList = function (list) {
    var a = ['asdf', 'sdfsdf', {sadf: 'sdf'}, 'sadf'];
};

/**
 * Similair to execSync, but instead does not capture output, only the exit code
 * @param cmd
 * @param exitOnlyOnError
 * @returns {int} exitcode
 */
sh.run = function (cmd, exitOnlyOnError) {
    return execsync.run(cmd + exitOnlyOnError === true ? '1>&amp;2; exit 1' : '');

};

sh.s = function () {

};

            {% endhighlight %}





</div>
