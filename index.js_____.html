---
layout: page
title: Node Radic
minify_content: false
navigation:
  - name: Home
    link: /
    icon: fa fa-home
  - name: Overview
    link: /node-radic
    icon: fa fa-dashboard
  - name: Coverage
    link: /node-radic/coverage
    icon: fa fa-code
  - name: Tutorials
    link: null
    icon: fa fa-info
    children:
      - name: General
        link: /node-radic/tutorials
      - name: "Cli & Commands"
        link: /node-radic/tutorials/cli.html
      - name: "Config & DB"
        link: /node-radic/tutorials/config-db.html
      - name: Binwraps
        link: /node-radic/tutorials/binwraps.html
  - name: Modules
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: radic
        link: /node-radic/module-radic.html
  - name: Classes
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: Config
        link: /node-radic/Config.html
      - name: DB
        link: /node-radic/DB.html
      - name: Model
        link: /node-radic/Model.html
      - name: Table
        link: /node-radic/Table.html
  - name: Namespaces
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: binwraps
        link: /node-radic/binwraps.html
      - name: cli
        link: /node-radic/cli.html
      - name: git
        link: /node-radic/git.html
      - name: net
        link: /node-radic/net.html
      - name: sh
        link: /node-radic/sh.html
      - name: util
        link: /node-radic/util.html
  - name: Tutorials
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: cli
        link: /node-radic/undefined

---

<link type="text/css" rel="stylesheet" href="styles/jsdoc-radic.css">


<ul class="nav nav-tabs hide">
    <li><a href="index.html">Overview</a></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Modules<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="module-radic.html">radic</a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Classes<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="Config.html">Config</a></li><li><a href="DB.html">DB</a></li><li><a href="Model.html">Model</a></li><li><a href="Table.html">Table</a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Namespaces<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="binwraps.html">binwraps</a></li><li><a href="cli.html">cli</a></li><li><a href="git.html">git</a></li><li><a href="net.html">net</a></li><li><a href="sh.html">sh</a></li><li><a href="util.html">util</a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Tutorials<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="tutorial-cli_.html">cli</a></li><li><a href="tutorial-index_.html">index</a></li></ul></li>
</ul>

<div id="main">
    



    
            {% highlight javascript %}
            var Download = require('./download'),
    progress = require('download-status'),
    _ = require('lodash'),
    path = require('path'),
    async = require('async'),
    util = require('../util');


function _download(url, destDir, opts, callback) {
    var download = new Download(_.merge({extract: false, strip: 1, mode: '755'}, opts))
        .dest(path.resolve(destDir))
        .get(url)
        .use(progress());

    download.run(function (err, files, stream) {
        if (err) {
            throw err;
        }

        if (typeof callback === 'function') {
            callback(err, files, stream);
        }
    });
}


/**
 * @namespace net
 */
var net = module.exports;
var ll = console.log;


/**
 * Download one or more files, with progressbar
 * @see {@link https://github.com/request/request#requestoptions-callback} Possible options accepted by the request module
 *
 * @param {string|array} url - Either a URL or an array of URL's
 * @param {string} destDir - Path to destination directory
 * @param {object|function} opts - Options or callback
 * @param {function} [callback] - Callback
 */
net.download = function (url, destDir, opts, callback) {

    if(typeof callback === 'undefined'){
        callback = opts;
        opts = {};
    }
    //console.log(path.resolve(path.dirname(dest)));
    //console.log(path.basename(dest));
    // https://github.com/request/request#requestoptions-callback

    /*
    For some reason async.each doesnt work as it should.
     */
    if (_.isArray(url)) {
        var falls = [];
        _.forEach(url, function (link, i) {
            falls.push(function(next){
                _download(link, destDir, opts, function () {
                    next();
                });
            })
        });
        async.waterfall(falls, function (err) {
            if (err) throw err;
            callback(err);
        });
    } else {
        _download(url, destDir, opts, callback);
    }
};

            {% endhighlight %}





</div>
