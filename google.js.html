---
layout: page
title: Node Radic
minify_content: false
navigation:
  - name: Home
    link: /
    icon: fa fa-home
  - name: Overview
    link: /node-radic
    icon: fa fa-dashboard
  - name: Coverage
    link: /node-radic/coverage
    icon: fa fa-code
  - name: Tutorials
    link: null
    icon: fa fa-info
    children:
      - name: General
        link: /node-radic/tutorials
      - name: "Cli & Commands"
        link: /node-radic/tutorials/cli.html
      - name: "Config & DB"
        link: /node-radic/tutorials/config-db.html
      - name: Binwraps
        link: /node-radic/tutorials/binwraps.html
  - name: Modules
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: radic
        link: /node-radic/module-radic.html
  - name: Classes
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: Config
        link: /node-radic/Config.html
      - name: DB
        link: /node-radic/DB.html
      - name: Model
        link: /node-radic/Model.html
      - name: Table
        link: /node-radic/Table.html
  - name: Events
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: error
        link: "/node-radic/Model.html#create#event:error"
      - name: "create:invalid"
        link: "/node-radic/Model.html#event:create:invalid"
      - name: create
        link: "/node-radic/Model.html#event:create"
  - name: Namespaces
    link: "#"
    icon: fa fa-mortar-board
    children:
      - name: binwraps
        link: /node-radic/binwraps.html
      - name: cli
        link: /node-radic/cli.html
      - name: git
        link: /node-radic/git.html
      - name: net
        link: /node-radic/net.html
      - name: sh
        link: /node-radic/sh.html
      - name: util
        link: /node-radic/util.html

---

<link type="text/css" rel="stylesheet" href="styles/jsdoc-radic.css">


<ul class="nav nav-tabs hide">
    <li><a href="index.html">Overview</a></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Modules<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="module-radic.html">radic</a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Classes<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="Config.html">Config</a></li><li><a href="DB.html">DB</a></li><li><a href="Model.html">Model</a></li><li><a href="Table.html">Table</a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Events<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="Model.html#create#event:error">error</a></li><li><a href="Model.html#event:create:invalid">create:invalid</a></li><li><a href="Model.html#event:create">create</a></li></ul></li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Namespaces<i class="fa fa-angle-down"></i></a><ul class="dropdown-menu" role="menu"><li><a href="binwraps.html">binwraps</a></li><li><a href="cli.html">cli</a></li><li><a href="git.html">git</a></li><li><a href="net.html">net</a></li><li><a href="sh.html">sh</a></li><li><a href="util.html">util</a></li></ul></li>
</ul>

<div id="main">
    



    
            {% highlight javascript %}
            var app = require('../app'),
    sh = require('../sh'),
    _ = require('lodash'),
    util = require('../util'),
    google = require('../google'),
    config = app.config,
    GoogleContacts = require('google-contacts').GoogleContacts;
/**
 * @param {cli} cli
 */
module.exports = function (cli) {

    cli.command('google OR google :action OR google :action :key OR google :action :key :value')
        .description('Configures radic')
        .usage({
            'google contacts': 'Shows all contacts',
            'google contacts &lt;filter>': 'Shows all contacts'
        })
        .method(function (cmd) {
            if (typeof cmd.action === 'undefined') {
                cli.log.fatal('Not enough arguments, config requires an action');
            } else {
                //var client = google.getClient();
                switch (cmd.action) {
                    case "contacts":
                        google.authorize(google.scopes.contacts.readwrite, function (token) {
                         //   console.log('tokens', token);
                            var c = new GoogleContacts({token: token.access_token});
                            c._get({type: 'contacts'}, function (err, contacts) {
                                if (util.defined(contacts)) {

                                    // console.log(util.inspect(contacts.feed, {showHidden: true, color: false, depth: 3}));
//                                    var table = cli.table('default', 'borderless', {}).head('Naam', 'Telefoon');

                                    var colPairs = 3,
                                        cols = colPairs * 2;
                                    var colW = 100 / 6;
                                    var table = cli
                                        .table('default', 'borderless')
                                        .head();
                                    var colPair,
                                        colPairsContent = [];

                                    if (process.stdout.getWindowSize()[0] - 10 &lt; 200) {
                                        colPairs = 3;
                                    }

                                    var entries = {};
                                    var names = []
                                    _.forEach(contacts.feed.entry, function (contact, i) {
                                        entries[contact.title['$t']] = _.pluck(contact['gd$phoneNumber'], '$t').join("\n");
                                        names.push(contact.title['$t']);
                                    });
                                    //var sorted = _.map(_.sortBy(entries, [0, 1]), _.values);

                                    if (typeof cmd.key === 'string' &amp;&amp; !util.defined(cmd.value)) {
                                        names = _.filter(names.sort(), function (val) {
                                           // console.log(val);
                                            return val.toLowerCase().indexOf(cmd.key) > -1;
                                        })
                                    }
                                    _.forEach(names,
                                        function (name, i) {
                                            var entry = entries[name];
                                           // console.log(name, i, entry)
                                            colPair = (i % 3) + 1;
                                            colPairsContent.push(name, entry);
                                            if (colPair &lt; colPairs) {
                                                colPairsContent.push(cli.red('||'));
                                            }

                                            if (colPairs == colPair) {
                                                table.push(colPairsContent);
                                                colPairsContent = [];
                                            }
                                        });

                                    while (colPair &lt; colPairs) {
                                        colPair++;
                                        colPairsContent.push('-', '-');
                                        table.options.head.push('Naam', 'Telefoonnr')
                                        if (colPairs != colPair) {
                                            table.options.head.push('')
                                        }
                                    }

                                    table.push(colPairsContent);
                                    util.print('\u001B[2J\u001B[0;0f')
                                    console.log("\n" + table.toString());

                                }
                                cli.exit();
                            });

                        });
                        break;
                    case "contacts2":
                        google.authorize(google.scopes.contacts.readonly, function (client) {
                            cli.log.ok('YES');
                            util.log(client);
                            require('http').request({
                                url: 'https://www.googleapis.com/auth/contacts.readonly'
                            }, function (a, b) {
                                console.log(a, b);
                                cli.exit();
                            })
                        });

                        break;

                }
            }
        });

};

            {% endhighlight %}





</div>
